### <br>렉시컬 환경

---
렉시컬 환경은 `자바스크립트 엔진`이 코드를 실행할 때 유지하는 구조로,
현재 스코프와 관련된 식별자(변수, 함수)의 `매핑을 저장`한다.  

식별자의 매핑을 저장한다는 의미는 렉시컬 환경에서 `변수와 값의 관계를 기록`하는 것을 의미한다. 즉, 각 스코프 내에서 변수 이름과 그 값을 `객체 형태로 저장`하는 것을 의미한다.

- 매핑 : 어떤 집합의 요소를 다른 집합의 요소와 연결 시키는것.

#### <br>환경 레코드(Environment Record)와 외부 렉시컬 환경 참조(Outer Lexical Environment Reference)
환경 레코드는 현재 스코프 내의 모든 식별자와 그 값들을 `저장하는 객체`를 의미한다.

```javascript
function enviromentOuter() {
  let a = 10; // 환경 레코드에 저장됨
  
  function enviromentInner() {
    let b = 20; // 환경 레코드에 저장됨
    
    // 외부 환경(enviromentOuter) 참조
    // a 는 enviromentInner 함수의
    // 외부 렉시컬 환경(enviromentOuter)에서 참조되어 실행
    console.log(a);
  }

  enviromentInner();
}

enviromentOuter();
```


### <br>클로저 (Closure)

---
**클로저 구성 요소**  
- 함수: 클로저의 핵심으로, 함수는 실행될 때 자신이 선언된 `렉시컬 환경에 접근`할 수 있다.
- 렉시컬 환경: 함수가 `선언될 때 변수와 값이 저장된 환경`으로, 함수가 선언된 스코프 내부의 모든 식별자가 포함된다.
- 외부 렉시컬 환경 참조: 중첩된 함수에서 `외부 함수의 렉시컬 환경에 대한 참조`를 통해 외부 스코프의 변수에 접근할 수 있다.

클로저란 함수와 함수가 선언된 렉시컬 환경(Lexical Environment)의 조합이다. 클로저는 함수가 생성될 때 그 함수가 선언된 렉시컬 환경을 기억하여 해당 함수가 선언된 스코프 밖에서 호출되더라도 그 환경에 접근할 수 있다.  

클로저를 사용하면 데이터에 대한 접근을 제한(데이터 은닉)할 수 있고, 함수가 종료된 후에도 변수를 유지(상태 유지)할 수 있다.

### <br>클로저와 렉시컬 환경

---
클로저는 함수가 선언될 때의 렉시컬 환경을 기억하여 함수가 호출될 때 이 환경에 접근할 수 있도록 하는 메커니즘이다. 클로저를 사용하면 함수가 자신이 `선언된 스코프 밖에서 호출`되어도 원래의 렉시컬 환경에 접근할 수 있다.

```javascript
function createCounter() {
  let count = 0; // 외부 렉시컬 환경에 저장됨

  return function() {
    count++; // 외부 렉시컬 환경의 count 변수에 접근
    console.log(count);
  }
}

const counter = createCounter(); // 클로저가 생성됨
counter(); // 1
counter(); // 2
```

### <br>요약

---
#### 렉시컬 환경
자바스크립트 엔진이 코드를 실행할 때 각 스코프 내의 변수와 값을 저장하는 구조

#### 환경 레코드
현재 스코프 내의 모든 식별자와 식별자의 값을 저장하는 객체

#### 외부 렉시컬 환경 참조
중첩된 함수에서 외부 함수의 렉시컬 환경에 대한 참조

#### 클로저
함수와 그 함수가 선언된 렉시컬 환경의 조합으로, 함수가 생성될 때의 환경을 기억하여 해당하는 함수가 선언된 스코프 밖에서 호출되더라도 그 환경에 접근할 수 있게 하는 메커니즘